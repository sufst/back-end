<?xml version="1.0" encoding="UTF-8"?>
<config>
    <server>
        <config name="verbose">INFO</config>
        <config name="mode">cloud</config>
        <config name="ip">localhost</config>
        <config name="port">5000</config>
    </server>
    <database>
        <config name="verbose">INFO</config>
        <config name="mongodb_url">mongodb://localhost:27017/local</config>
    </database>
    <userManagement>
        <config name="verbose">INFO</config>
    </userManagement>
    <factory>
        <!--Valid factory are XBee or socket-->
        <config name="client">socket</config>
        <client name="XBee">
            <config name="baud">115200</config>
            <config name="com">COM8</config>
            <config name="mac">0013A200410AC922</config>
        </client>
        <client name="socket">
            <config name="ip">127.0.0.1</config>
            <config name="port">19900</config>
        </client>
        <config name="verbose">WARN</config>
    </factory>
    <sensors>
        <!--The sensor names must match with the emulator and schema names-->
        <sensor name="rpm">
            <config name="name">RPM</config>
            <config name="units">RPM</config>
            <config name="enable">True</config>
            <config name="group">Core</config>
            <meta name="min">0</meta>
            <meta name="max">10000</meta>
            <meta name="on_dash">True</meta>
            <config name="emulation">int(5000 * modules.math.sin(modules.math.radians(x * 10)) + 5000)</config>
        </sensor>
        <sensor name="water_temp_c">
            <config name="name">Water Temp</config>
            <config name="units">C</config>
            <config name="enable">True</config>
            <config name="group">Core</config>
            <meta name="min">0</meta>
            <meta name="max">120</meta>
            <meta name="on_dash">True</meta>
            <config name="emulation">modules.random.randint(80, 100)</config>
        </sensor>
        <sensor name="tps_perc">
            <config name="name">TPS</config>
            <config name="units">%</config>
            <config name="enable">True</config>
            <config name="group">Core</config>
            <meta name="min">0</meta>
            <meta name="max">100</meta>
            <meta name="on_dash">True</meta>
            <config name="emulation">int(50*modules.math.sin(modules.math.radians(x*10))+50)</config>
        </sensor>
        <sensor name="battery_mv">
            <config name="name">Battery Voltage</config>
            <config name="units">mV</config>
            <config name="enable">True</config>
            <config name="group">Core</config>
            <meta name="min">6000</meta>
            <meta name="max">18000</meta>
            <meta name="on_dash">True</meta>
            <config name="emulation">modules.random.randint(11900, 12100)</config>
        </sensor>
        <sensor name="ext_5v_mv">
            <config name="name">External 5V Rail</config>
            <config name="units">mV</config>
            <config name="enable">True</config>
            <config name="group">Core</config>
            <meta name="min">3000</meta>
            <meta name="max">6000</meta>
            <meta name="on_dash">False</meta>
            <config name="emulation">modules.random.randint(4900, 5100)</config>
        </sensor>
        <sensor name="fuel_flow">
            <config name="name">Fuel Flow</config>
            <config name="units">l/s</config>
            <config name="enable">True</config>
            <config name="group">Core</config>
            <meta name="min">0</meta>
            <meta name="max">50</meta>
            <meta name="on_dash">False</meta>
            <config name="emulation">int(25 * modules.math.sin(modules.math.radians(x * 10)) + 25)</config>
        </sensor>
        <sensor name="lambda">
            <config name="name">Lambda</config>
            <config name="units">lambda</config>
            <config name="enable">True</config>
            <config name="group">Core</config>
            <meta name="min">0</meta>
            <meta name="max">150</meta>
            <meta name="on_dash">False</meta>
            <config name="emulation">int(25 * modules.math.sin(modules.math.radians(x * 10)) + 50)</config>
        </sensor>
        <sensor name="speed_kph">
            <config name="name">Speed</config>
            <config name="units">kph</config>
            <config name="enable">True</config>
            <config name="group">Core</config>
            <meta name="min">0</meta>
            <meta name="max">120</meta>
            <meta name="on_dash">True</meta>
            <config name="emulation">int(150 * modules.math.sin(modules.math.radians(x * 10)) + 150)</config>
        </sensor>
        <sensor name="evo_scan_1">
            <config name="name">EvoScanner-1</config>
            <config name="units">Pa</config>
            <config name="enable">True</config>
            <config name="group">Aero</config>
            <meta name="min">0</meta>
            <meta name="max">100</meta>
            <meta name="on_dash">False</meta>
            <config name="emulation">int(10 * modules.math.sin(modules.math.radians(x * 10)) + 10)</config>
        </sensor>
        <sensor name="evo_scan_2">
            <config name="name">EvoScanner-2</config>
            <config name="units">Pa</config>
            <config name="enable">True</config>
            <config name="group">Aero</config>
            <meta name="min">0</meta>
            <meta name="max">100</meta>
            <meta name="on_dash">False</meta>
            <config name="emulation">int(15 * modules.math.sin(modules.math.radians(x * 10)) + 15)</config>
        </sensor>
        <sensor name="evo_scan_3">
            <config name="name">EvoScanner-3</config>
            <config name="units">Pa</config>
            <config name="enable">True</config>
            <config name="group">Aero</config>
            <meta name="min">0</meta>
            <meta name="max">100</meta>
            <meta name="on_dash">False</meta>
            <config name="emulation">int(15 * modules.math.sin(modules.math.radians(x * 10)) + 20)</config>
        </sensor>
        <sensor name="evo_scan_4">
            <config name="name">EvoScanner-4</config>
            <config name="units">Pa</config>
            <config name="enable">True</config>
            <config name="group">Aero</config>
            <meta name="min">0</meta>
            <meta name="max">100</meta>
            <meta name="on_dash">False</meta>
            <config name="emulation">int(15 * modules.math.sin(modules.math.radians(x * 10)) + 25)</config>
        </sensor>
        <sensor name="evo_scan_5">
            <config name="name">EvoScanner-5</config>
            <config name="units">Pa</config>
            <config name="enable">True</config>
            <config name="group">Aero</config>
            <meta name="min">0</meta>
            <meta name="max">100</meta>
            <meta name="on_dash">False</meta>
            <config name="emulation">int(15 * modules.math.sin(modules.math.radians(x * 10)) + 30)</config>
        </sensor>
        <sensor name="evo_scan_6">
            <config name="name">EvoScanner-6</config>
            <config name="units">Pa</config>
            <config name="enable">True</config>
            <config name="group">Aero</config>
            <meta name="min">0</meta>
            <meta name="max">100</meta>
            <meta name="on_dash">False</meta>
            <config name="emulation">int(15 * modules.math.sin(modules.math.radians(x * 10)) + 35)</config>
        </sensor>
        <sensor name="evo_scan_7">
            <config name="name">EvoScanner-7</config>
            <config name="units">Pa</config>
            <config name="enable">True</config>
            <config name="group">Aero</config>
            <meta name="min">0</meta>
            <meta name="max">100</meta>
            <meta name="on_dash">False</meta>
            <config name="emulation">int(15 * modules.math.sin(modules.math.radians(x * 10)) + 40)</config>
        </sensor>
        <sensor name="status_ecu_connected">
            <config name="name">ECU Status</config>
            <config name="units">Code</config>
            <config name="enable">True</config>
            <config name="group">Diagnostic</config>
            <meta name="min">0</meta>
            <meta name="max">1</meta>
            <meta name="on_dash">True</meta>
            <config name="emulation">int(1)</config>
        </sensor>
        <sensor name="status_engine">
            <config name="name">Engine Status</config>
            <config name="units">Code</config>
            <config name="enable">True</config>
            <config name="group">Diagnostic</config>
            <meta name="min">0</meta>
            <meta name="max">2</meta>
            <meta name="on_dash">True</meta>
            <config name="emulation">int(1)</config>
        </sensor>
        <sensor name="status_battery">
            <config name="name">Battery Status</config>
            <config name="units">Code</config>
            <config name="enable">True</config>
            <config name="group">Diagnostic</config>
            <meta name="min">0</meta>
            <meta name="max">2</meta>
            <meta name="on_dash">True</meta>
            <config name="emulation">int(2)</config>
        </sensor>
        <sensor name="status_logging">
            <config name="name">Logging Status</config>
            <config name="units">Code</config>
            <config name="enable">True</config>
            <config name="group">Diagnostic</config>
            <meta name="min">0</meta>
            <meta name="max">1</meta>
            <meta name="on_dash">True</meta>
            <config name="emulation">int(1)</config>
        </sensor>
        <sensor name="inj_time">Power
            <config name="name">Injection Time</config>
            <config name="units">ms</config>
            <config name="enable">True</config>
            <config name="group">Power Train</config>
            <meta name="min">0</meta>
            <meta name="max">10</meta>
            <meta name="on_dash">False</meta>
            <config name="emulation">modules.random.randint(6, 10)</config>
        </sensor>
        <sensor name="inj_duty_cycle">
            <config name="name">Injection Duty Cycle</config>
            <config name="units">ms</config>
            <config name="enable">True</config>
            <config name="group">Power Train</config>
            <meta name="min">50</meta>
            <meta name="max">100</meta>
            <meta name="on_dash">False</meta>
            <config name="emulation">modules.random.randint(70, 80)</config>
        </sensor>
        <sensor name="lambda_pid_adj">
            <config name="name">Lambda PID Adjust</config>
            <config name="units">%</config>
            <config name="enable">True</config>
            <config name="group">Power Train</config>
            <meta name="min">0</meta>
            <meta name="max">40</meta>
            <meta name="on_dash">False</meta>
            <config name="emulation">modules.random.randint(10, 20)</config>
        </sensor>
        <sensor name="lambda_pid_target">
            <config name="name">Lambda PID Target</config>
            <config name="units">%</config>
            <config name="enable">True</config>
            <config name="group">Power Train</config>
            <meta name="min">80</meta>
            <meta name="max">120</meta>
            <meta name="on_dash">False</meta>
            <config name="emulation">modules.random.randint(95, 105)</config>
        </sensor>
        <sensor name="advance">
            <config name="name">Advance</config>
            <config name="units">advance</config>
            <config name="enable">True</config>
            <config name="group">Power Train</config>
            <meta name="min">0</meta>
            <meta name="max">10</meta>
            <meta name="on_dash">False</meta>
            <config name="emulation">modules.random.randint(0, 5)</config>
        </sensor>
        <sensor name="ride_height_fl_cm">
            <config name="name">Ride Height FL</config>
            <config name="units">cm</config>
            <config name="enable">True</config>
            <config name="group">Suspension</config>
            <meta name="min">0</meta>
            <meta name="max">20</meta>
            <meta name="on_dash">False</meta>
            <config name="emulation">int(5 * modules.math.cos(modules.math.radians(x * 15)) + 8)</config>
        </sensor>
        <sensor name="ride_height_fr_cm">
            <config name="name">Ride Height FR</config>
            <config name="units">cm</config>
            <config name="enable">True</config>
            <config name="group">Suspension</config>
            <meta name="min">0</meta>
            <meta name="max">20</meta>
            <meta name="on_dash">False</meta>
            <config name="emulation">int(5 * modules.math.sin(modules.math.radians(x * 15)) + 8)</config>
        </sensor>
        <sensor name="ride_height_flw_cm">
            <config name="name">Ride Height FLW</config>
            <config name="units">cm</config>
            <config name="enable">True</config>
            <config name="group">Suspension</config>
            <meta name="min">0</meta>
            <meta name="max">20</meta>
            <meta name="on_dash">False</meta>
            <config name="emulation">int(5 * modules.math.cos(modules.math.radians(x * 5)) + 8)</config>
        </sensor>
        <sensor name="ride_height_rear_cm">
            <config name="name">Ride Height Rear</config>
            <config name="units">cm</config>
            <config name="enable">True</config>
            <config name="group">Suspension</config>
            <meta name="min">0</meta>
            <meta name="max">20</meta>
            <meta name="on_dash">False</meta>
            <config name="emulation">int(5 * modules.math.sin(modules.math.radians(x * 5)) + 8)</config>
        </sensor>
        <sensor name="lap_time_s">
            <config name="name">Lap Time</config>
            <config name="units">s</config>
            <config name="enable">True</config>
            <config name="group">Misc</config>
            <meta name="min">0</meta>
            <meta name="max">1000</meta>
            <meta name="on_dash">False</meta>
            <config name="emulation">int(x)</config>
        </sensor>
        <sensor name="accel_fl_x_mg">
            <config name="name">Acceleration FL x</config>
            <config name="units">mg</config>
            <config name="enable">True</config>
            <config name="group">Misc</config>
            <meta name="min">0</meta>
            <meta name="max">3000</meta>
            <meta name="on_dash">False</meta>
            <config name="emulation">int(500 * modules.math.sin(modules.math.radians(x * 10 + 1)) + 1000)</config>
        </sensor>
        <sensor name="accel_fl_y_mg">
            <config name="name">Acceleration FL y</config>
            <config name="units">mg</config>
            <config name="enable">True</config>
            <config name="group">Misc</config>
            <meta name="min">0</meta>
            <meta name="max">3000</meta>
            <meta name="on_dash">False</meta>
            <config name="emulation">int(500 * modules.math.sin(modules.math.radians(x * 10 + 0.5)) + 1000)</config>
        </sensor>
        <sensor name="accel_fl_z_mg">
            <config name="name">Acceleration FL z</config>
            <config name="units">mg</config>
            <config name="enable">True</config>
            <config name="group">Misc</config>
            <meta name="min">0</meta>
            <meta name="max">3000</meta>
            <meta name="on_dash">False</meta>
            <config name="emulation">int(500 * modules.math.sin(modules.math.radians(x * 10)) + 1000)</config>
        </sensor>
    </sensors>
    <emulation>
        <config name="modules">
            <module name="math">math</module>
            <module name="random">random</module>
        </config>
        <!--Delay in seconds (can be a float)-->
        <config name="delay">0.5</config>
        <config name="verbose">INFO</config>
    </emulation>
    <schema>
        <!--The sensor names must match with the sensor names in the sensor section-->
        <config name="verbose">INFO</config>
        <config name="start_byte">1</config>
        <!--See https://docs.python.org/3/library/struct.html#format-characters for C type sizes-->
        <pdu name = "core">
            <config name="id">0</config>
            <field name="valid_bitfield">
                <property name="C_type">H</property>
            </field>
            <field name="epoch">
                <property name="C_type">d</property>
            </field>
            <field name="rpm">
                <property name="C_type">H</property>
            </field>
            <field name="water_temp_c">
                <property name="C_type">H</property>
            </field>
            <field name="tps_perc">
                <property name="C_type">H</property>
            </field>
            <field name="battery_mv">
                <property name="C_type">H</property>
            </field>
            <field name="ext_5v_mv">
                <property name="C_type">H</property>
            </field>
            <field name="fuel_flow">
                <property name="C_type">H</property>
            </field>
            <field name="lambda">
                <property name="C_type">H</property>
            </field>
            <field name="speed_kph">
                <property name="C_type">H</property>
            </field>
        </pdu>
        <pdu name = "aero">
            <config name="id">1</config>
            <field name="valid_bitfield">
                <property name="C_type">H</property>
            </field>
            <field name="epoch">
                <property name="C_type">d</property>
            </field>
            <field name="evo_scan_1">
                <property name="C_type">H</property>
            </field>
            <field name="evo_scan_2">
                <property name="C_type">H</property>
            </field>
            <field name="evo_scan_3">
                <property name="C_type">H</property>
            </field>
            <field name="evo_scan_3">
                <property name="C_type">H</property>
            </field>
            <field name="evo_scan_4">
                <property name="C_type">H</property>
            </field>
            <field name="evo_scan_5">
                <property name="C_type">H</property>
            </field>
            <field name="evo_scan_6">
                <property name="C_type">H</property>
            </field>
            <field name="evo_scan_7">
                <property name="C_type">H</property>
            </field>
        </pdu>
        <pdu name = "diagnostic">
            <config name="id">2</config>
            <field name="valid_bitfield">
                <property name="C_type">H</property>
            </field>
            <field name="epoch">
                <property name="C_type">d</property>
            </field>
            <field name="status_ecu_connected">
                <property name="C_type">H</property>
            </field>
            <field name="status_engine">
                <property name="C_type">H</property>
            </field>
            <field name="status_battery">
                <property name="C_type">H</property>
            </field>
            <field name="status_logging">
                <property name="C_type">H</property>
            </field>
        </pdu>
        <pdu name = "power_train">
            <config name="id">3</config>
            <field name="valid_bitfield">
                <property name="C_type">H</property>
            </field>
            <field name="epoch">
                <property name="C_type">d</property>
            </field>
            <field name="inj_time">
                <property name="C_type">H</property>
            </field>
            <field name="inj_duty_cycle">
                <property name="C_type">H</property>
            </field>
            <field name="lambda_pid_adj">
                <property name="C_type">H</property>
            </field>
            <field name="lambda_pid_target">
                <property name="C_type">H</property>
            </field>
            <field name="advance">
                <property name="C_type">H</property>
            </field>
        </pdu>
        <pdu name = "suspension">
            <config name="id">4</config>
            <field name="valid_bitfield">
                <property name="C_type">H</property>
            </field>
            <field name="epoch">
                <property name="C_type">d</property>
            </field>
            <field name="ride_height_fl_cm">
                <property name="C_type">H</property>
            </field>
            <field name="ride_height_fr_cm">
                <property name="C_type">H</property>
            </field>
            <field name="ride_height_flw_cm">
                <property name="C_type">H</property>
            </field>
            <field name="ride_height_rear_cm">
                <property name="C_type">H</property>
            </field>
        </pdu>
        <pdu name = "misc">
            <config name="id">5</config>
            <field name="valid_bitfield">
                <property name="C_type">H</property>
            </field>
            <field name="epoch">
                <property name="C_type">d</property>
            </field>
            <field name="lap_time_s">
                <property name="C_type">H</property>
            </field>
            <field name="accel_fl_x_mg">
                <property name="C_type">H</property>
            </field>
            <field name="accel_fl_y_mg">
                <property name="C_type">H</property>
            </field>
            <field name="accel_fl_z_mg">
                <property name="C_type">H</property>
            </field>
        </pdu>
    </schema>
</config>
